---
image: fedora/rawhide
packages:
  - python3
  - python3-dnf
  - fedora-repos-rawhide
tasks:
  - lint: |
      cd fedrq
      venv="$(mktemp -d)"
      python3 -m venv "${venv}"  --system-site-packages
      source "${venv}/bin/activate"
      pip3 install '.[lint]'
      check=true ./lint.sh
  - pytest: |
      cd fedrq
      venv="$(mktemp -d)"
      python3 -m venv "${venv}"  --system-site-packages
      source "${venv}/bin/activate"
      pip3 install '.[test]'
      pytest
