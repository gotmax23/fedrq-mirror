# SPDX-FileCopyrightText: 2022 Maxwell G <gotmax@e.email>
# SPDX-License-Identifier: GPL-2.0-or-later

---
image: fedora/rawhide
packages:
  - python3
  - python3-dnf
  - fedora-repos-rawhide
tasks:
  - lint: |
      cd fedrq
      venv="$(mktemp -d)"
      python3 -m venv "${venv}"  --system-site-packages
      source "${venv}/bin/activate"
      pip3 install '.[lint]'
      ./lint.sh --check
  - pytest: |
      cd fedrq
      venv="$(mktemp -d)"
      python3 -m venv "${venv}"  --system-site-packages
      source "${venv}/bin/activate"
      pip3 install '.[test]'
      pytest
